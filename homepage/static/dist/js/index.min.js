document.addEventListener("DOMContentLoaded",(function(e){function n(){var e=document.getElementById("profile-icon-preview"),n=document.getElementById("profile-icon-webgl"),t=new THREE.PerspectiveCamera(45,n.clientWidth/n.clientHeight,1,1e3);t.position.z=200;var i=new THREE.WebGLRenderer({antialias:!0,alpha:!0});i.setSize(n.clientWidth,n.clientHeight),n.prepend(i.domElement);var o=(new THREE.TextureLoader).load("/static/img/ausschnitt.webp",(function(){m()})),r=(new THREE.TextureLoader).load("/static/img/ausschnitt-depth.webp",(function(){m()})),a=new THREE.ShaderMaterial({uniforms:{mouseX:{value:0},mouseY:{value:0},scrollOffset:{value:0},texture:{value:o},depthTexture:{value:r}},vertexShader:"\n            varying vec2 vUv;\n            void main()\t{\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n        ",fragmentShader:"\n            #extension GL_OES_standard_derivatives : enable\n            varying vec2 vUv;\n            uniform float mouseX;\n            uniform float mouseY;\n            uniform float scrollOffset;\n            uniform sampler2D depthTexture;\n            uniform sampler2D texture;\n            void main() {\n                vec2 vMouse = vec2(mouseX, mouseY);\n                vec2 vScrollOffset = vec2(0, scrollOffset);\n                float depth = texture2D(depthTexture, vUv).r;\n                gl_FragColor = texture2D(texture, vUv + vMouse * (depth) + vScrollOffset);\n                // Do some edge anti aliasing, because the image contains\n                // a premultiplied alpha channel\n                gl_FragColor.rgb = gl_FragColor.rgb * gl_FragColor.a;\n            }\n        "}),d=new THREE.Scene,l=new THREE.PlaneBufferGeometry(1,1),s=new THREE.Mesh(l,a);function c(e){var o=n.getBoundingClientRect(),r=Math.max(-500,Math.min(500,e.clientX-o.left)),l=Math.max(-500,Math.min(500,e.clientY-o.top));a.uniforms.mouseX.value=-r/15e3,a.uniforms.mouseY.value=l/15e3,n.style.transform="rotate3d(0, 1, 1, "+r/50+"deg)",window.requestAnimationFrame((function(){i.render(d,t)}))}function m(){t.aspect=n.clientWidth/n.clientHeight,t.updateProjectionMatrix();var e=THREE.Math.degToRad(t.fov),o=2*Math.tan(e/2)*t.position.z,r=o,a=1*o;s.scale.set(a,r,1),i.setSize(n.clientWidth,n.clientHeight),window.requestAnimationFrame((function(){i.render(d,t)}))}function u(){document.documentElement.clientWidth<1023?(n.style.display="none",e.style.display="block",window.removeEventListener("resize",m,!0),document.removeEventListener("mousemove",c,!0)):(e.style.display="none",n.style.display="block",m(),window.addEventListener("resize",m,!0),document.addEventListener("mousemove",c,!0))}d.add(s),u(),window.addEventListener("resize",u,!1)}var t=!1;function i(){if(!(document.documentElement.clientWidth<1023||t)){var e=document.createElement("script");e.setAttribute("src","/static/vendor/js/three.min.js"),e.onload=n,document.body.appendChild(e),t=!0}}i(),window.addEventListener("resize",i,!1)})),document.addEventListener("DOMContentLoaded",(function(e){var n=document.getElementById("macbook-container"),t=document.getElementById("macbook-code-container"),i=document.getElementById("peerbridge-animation-preview"),o=document.getElementById("peerbridge-animation"),r=o.getContext("2d"),a=o.width*(2541/2225);o.height=a;var d=new Image;function l(e){return"/static/img/peerbridge-animation/animation-1000_"+e+".webp"}d.onload=function(){r.clearRect(0,0,o.width,o.height),r.drawImage(d,0,0,d.width,d.height,0,0,o.width,o.height)};var s=!1;function c(){var e=o.getBoundingClientRect(),n=1-(e.y+window.innerHeight)/(e.height+window.innerHeight);if(!(n>1||n<0)){if(!s){for(var t=function(e){new Promise((function(n){var t=new Image;t.onload=n,t.onerror=n,t.src=l(e)}))},i=38;i<=120;i++)t(i);s=!0}var r=38+Math.round(82*n);d.src=l(r)}}function m(){var e=n.getBoundingClientRect(),i=1-(e.y+window.innerHeight)/(e.height+window.innerHeight);i>1||i<0||(t.scrollTop=1e3*i)}function u(){document.documentElement.clientWidth<1023?(o.style.display="none",i.style.display="block",window.removeEventListener("scroll",c,!0),window.removeEventListener("scroll",m,!0)):(i.style.display="none",o.style.display="block",c(),window.addEventListener("scroll",c,!0),m(),window.addEventListener("scroll",m,!0))}u(),window.addEventListener("resize",u,!1)}));
//# sourceMappingURL=index.min.js.map